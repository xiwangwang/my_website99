---
categories:
- ""
- ""
date: "2020-10-20"
description: Analysing IBM HR Analytics Employee Attrition & Performance data
draft: false
image: pic07.jpg
keywords: ""
slug: blog8
title: Human Resoruce Analytics
---



<p>We will analyse a data set on Human Resoruce Analytics. The <a href="https://www.kaggle.com/pavansubhasht/ibm-hr-analytics-attrition-dataset">IBM HR Analytics Employee Attrition &amp; Performance data set</a> is a fictional data set created by IBM data scientists. Among other things, the data set includes employees’ income, their distance from work, their position in the company, their level of education, etc. A full description can be found on the website.</p>
<div id="cleaning-the-data" class="section level2">
<h2>Cleaning the data</h2>
<pre class="r"><code>hr_dataset &lt;- read_csv(&quot;~/Desktop/LBS/Data Analytics/Session____Workshop1_export/session2-workshop1/data/datasets_1067_1925_WA_Fn-UseC_-HR-Employee-Attrition.csv&quot;)
glimpse(hr_dataset)</code></pre>
<pre><code>## Rows: 1,470
## Columns: 35
## $ Age                      &lt;dbl&gt; 41, 49, 37, 33, 27, 32, 59, 30, 38, 36, 35,…
## $ Attrition                &lt;chr&gt; &quot;Yes&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;, &quot;No&quot;,…
## $ BusinessTravel           &lt;chr&gt; &quot;Travel_Rarely&quot;, &quot;Travel_Frequently&quot;, &quot;Trav…
## $ DailyRate                &lt;dbl&gt; 1102, 279, 1373, 1392, 591, 1005, 1324, 135…
## $ Department               &lt;chr&gt; &quot;Sales&quot;, &quot;Research &amp; Development&quot;, &quot;Researc…
## $ DistanceFromHome         &lt;dbl&gt; 1, 8, 2, 3, 2, 2, 3, 24, 23, 27, 16, 15, 26…
## $ Education                &lt;dbl&gt; 2, 1, 2, 4, 1, 2, 3, 1, 3, 3, 3, 2, 1, 2, 3…
## $ EducationField           &lt;chr&gt; &quot;Life Sciences&quot;, &quot;Life Sciences&quot;, &quot;Other&quot;, …
## $ EmployeeCount            &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ EmployeeNumber           &lt;dbl&gt; 1, 2, 4, 5, 7, 8, 10, 11, 12, 13, 14, 15, 1…
## $ EnvironmentSatisfaction  &lt;dbl&gt; 2, 3, 4, 4, 1, 4, 3, 4, 4, 3, 1, 4, 1, 2, 3…
## $ Gender                   &lt;chr&gt; &quot;Female&quot;, &quot;Male&quot;, &quot;Male&quot;, &quot;Female&quot;, &quot;Male&quot;,…
## $ HourlyRate               &lt;dbl&gt; 94, 61, 92, 56, 40, 79, 81, 67, 44, 94, 84,…
## $ JobInvolvement           &lt;dbl&gt; 3, 2, 2, 3, 3, 3, 4, 3, 2, 3, 4, 2, 3, 3, 2…
## $ JobLevel                 &lt;dbl&gt; 2, 2, 1, 1, 1, 1, 1, 1, 3, 2, 1, 2, 1, 1, 1…
## $ JobRole                  &lt;chr&gt; &quot;Sales Executive&quot;, &quot;Research Scientist&quot;, &quot;L…
## $ JobSatisfaction          &lt;dbl&gt; 4, 2, 3, 3, 2, 4, 1, 3, 3, 3, 2, 3, 3, 4, 3…
## $ MaritalStatus            &lt;chr&gt; &quot;Single&quot;, &quot;Married&quot;, &quot;Single&quot;, &quot;Married&quot;, &quot;…
## $ MonthlyIncome            &lt;dbl&gt; 5993, 5130, 2090, 2909, 3468, 3068, 2670, 2…
## $ MonthlyRate              &lt;dbl&gt; 19479, 24907, 2396, 23159, 16632, 11864, 99…
## $ NumCompaniesWorked       &lt;dbl&gt; 8, 1, 6, 1, 9, 0, 4, 1, 0, 6, 0, 0, 1, 0, 5…
## $ Over18                   &lt;chr&gt; &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;, &quot;Y&quot;…
## $ OverTime                 &lt;chr&gt; &quot;Yes&quot;, &quot;No&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, &quot;No&quot;, &quot;Yes…
## $ PercentSalaryHike        &lt;dbl&gt; 11, 23, 15, 11, 12, 13, 20, 22, 21, 13, 13,…
## $ PerformanceRating        &lt;dbl&gt; 3, 4, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 3, 3, 3…
## $ RelationshipSatisfaction &lt;dbl&gt; 1, 4, 2, 3, 4, 3, 1, 2, 2, 2, 3, 4, 4, 3, 2…
## $ StandardHours            &lt;dbl&gt; 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80,…
## $ StockOptionLevel         &lt;dbl&gt; 0, 1, 0, 0, 1, 0, 3, 1, 0, 2, 1, 0, 1, 1, 0…
## $ TotalWorkingYears        &lt;dbl&gt; 8, 10, 7, 8, 6, 8, 12, 1, 10, 17, 6, 10, 5,…
## $ TrainingTimesLastYear    &lt;dbl&gt; 0, 3, 3, 3, 3, 2, 3, 2, 2, 3, 5, 3, 1, 2, 4…
## $ WorkLifeBalance          &lt;dbl&gt; 1, 3, 3, 3, 3, 2, 2, 3, 3, 2, 3, 3, 2, 3, 3…
## $ YearsAtCompany           &lt;dbl&gt; 6, 10, 0, 8, 2, 7, 1, 1, 9, 7, 5, 9, 5, 2, …
## $ YearsInCurrentRole       &lt;dbl&gt; 4, 7, 0, 7, 2, 7, 0, 0, 7, 7, 4, 5, 2, 2, 2…
## $ YearsSinceLastPromotion  &lt;dbl&gt; 0, 1, 0, 3, 2, 3, 0, 0, 1, 7, 0, 0, 4, 1, 0…
## $ YearsWithCurrManager     &lt;dbl&gt; 5, 7, 0, 0, 2, 6, 0, 0, 8, 7, 3, 8, 3, 2, 3…</code></pre>
<p>I am going to clean the data set, as variable names are in capital letters, some variables are not really necessary, and some variables, e.g., <code>education</code> are given as a number rather than a more useful description</p>
<pre class="r"><code>hr_cleaned &lt;- hr_dataset %&gt;% 
  clean_names() %&gt;% 
  mutate(
    education = case_when(
      education == 1 ~ &quot;Below College&quot;,
      education == 2 ~ &quot;College&quot;,
      education == 3 ~ &quot;Bachelor&quot;,
      education == 4 ~ &quot;Master&quot;,
      education == 5 ~ &quot;Doctor&quot;
    ),
    environment_satisfaction = case_when(
      environment_satisfaction == 1 ~ &quot;Low&quot;,
      environment_satisfaction == 2 ~ &quot;Medium&quot;,
      environment_satisfaction == 3 ~ &quot;High&quot;,
      environment_satisfaction == 4 ~ &quot;Very High&quot;
    ),
    job_satisfaction = case_when(
      job_satisfaction == 1 ~ &quot;Low&quot;,
      job_satisfaction == 2 ~ &quot;Medium&quot;,
      job_satisfaction == 3 ~ &quot;High&quot;,
      job_satisfaction == 4 ~ &quot;Very High&quot;
    ),
    performance_rating = case_when(
      performance_rating == 1 ~ &quot;Low&quot;,
      performance_rating == 2 ~ &quot;Good&quot;,
      performance_rating == 3 ~ &quot;Excellent&quot;,
      performance_rating == 4 ~ &quot;Outstanding&quot;
    ),
    work_life_balance = case_when(
      work_life_balance == 1 ~ &quot;Bad&quot;,
      work_life_balance == 2 ~ &quot;Good&quot;,
      work_life_balance == 3 ~ &quot;Better&quot;,
      work_life_balance == 4 ~ &quot;Best&quot;
    )
  ) %&gt;% 
  select(age, attrition, daily_rate, department,
         distance_from_home, education,
         gender, job_role,environment_satisfaction,
         job_satisfaction, marital_status,
         monthly_income, num_companies_worked, percent_salary_hike,
         performance_rating, total_working_years,
         work_life_balance, years_at_company,
         years_since_last_promotion)</code></pre>
</div>
<div id="how-often-do-people-leave-the-company-attrition" class="section level2">
<h2>How often do people leave the company (<code>attrition</code>)</h2>
<pre class="r"><code>hr_cleaned %&gt;% 
  filter(attrition == &quot;Yes&quot;) %&gt;% 
  summarise(mean_until_attrition = mean(years_at_company, na.rm = TRUE))</code></pre>
<pre><code>## # A tibble: 1 x 1
##   mean_until_attrition
##                  &lt;dbl&gt;
## 1                 5.13</code></pre>
<p>Employees of the company leave the firm after 5.13 years on average.</p>
</div>
<div id="how-are-age-years_at_company-monthly_income-and-years_since_last_promotion-distributed" class="section level2">
<h2>How are <code>age</code>, <code>years_at_company</code>, <code>monthly_income</code> and <code>years_since_last_promotion</code> distributed?</h2>
<pre class="r"><code>summarise_age &lt;-
  hr_cleaned %&gt;% 
  summarise(stat = &quot;Age&quot;,
            mean_stat = mean(age),
            median_stat= median(age),
            std_stat = sd(age),
            min_stat = min(age),
            max_stat = max(age)) 
  
summarise_years &lt;-
  hr_cleaned %&gt;% 
  summarise(stat = &quot;Years at Company&quot;,
            mean_stat = mean(years_at_company),
            median_stat= median(years_at_company),
            std_stat = sd(years_at_company),
            min_stat = min(years_at_company),
            max_stat = max(years_at_company))
summarise_income &lt;-
  hr_cleaned %&gt;% 
  summarise(stat = &quot;Monthly Income&quot;,
            mean_stat = mean(monthly_income),
            median_stat= median(monthly_income),
            std_stat = sd(monthly_income),
            min_stat = min(monthly_income),
            max_stat = max(monthly_income))
summarise_promotion &lt;-
  hr_cleaned %&gt;% 
  summarise(stat = &quot;Years since last Promotion&quot;,
            mean_stat = mean(years_since_last_promotion),
            median_stat= median(years_since_last_promotion),
            std_stat = sd(years_since_last_promotion),
            min_stat = min(years_since_last_promotion),
            max_stat = max(years_since_last_promotion))
all_stats_summarise &lt;- bind_rows(summarise_age,
                                 summarise_years,
                                 summarise_income,
                                 summarise_promotion)
all_stats_summarise</code></pre>
<pre><code>## # A tibble: 4 x 6
##   stat                       mean_stat median_stat std_stat min_stat max_stat
##   &lt;chr&gt;                          &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
## 1 Age                            36.9           36     9.14       18       60
## 2 Years at Company                7.01           5     6.13        0       40
## 3 Monthly Income               6503.          4919  4708.       1009    19999
## 4 Years since last Promotion      2.19           1     3.22        0       15</code></pre>
<p>From our analysis we can infer the approximate distribution of our four variables <code>age</code>, <code>years_at_company</code>, <code>monthly_income</code> and <code>years_since_last_promotion</code>. A normal distribution can among other things be characterised by its mean and median being close to identical and both lying in the middle of the range between the maximum and minimum value. We can therefore summarise the following findings:</p>
<ul>
<li>Since the median and mean of Age are very similar we can say that it is very likely that this statistic is normally distributed. Furthermore, the mean seems to lie relatively in the middle to the min and max statistic.</li>
<li>Years at company seems to be right-skewed, since the mean is above the median and sits closer to the min than to the max.</li>
<li>Monthly income seems to be right-skewed, since the mean is above the median and sits closer to the min than to the max.</li>
<li>Years since last Promotion also seems to be right-skewed, since the mean is above the median and sits closer to the min than to the max.</li>
</ul>
</div>
<div id="how-are-job_satisfaction-and-work_life_balance-distributed" class="section level2">
<h2>How are <code>job_satisfaction</code> and <code>work_life_balance</code> distributed?</h2>
<pre class="r"><code>distr_satisf &lt;- hr_cleaned %&gt;% 
  select(job_satisfaction) %&gt;% 
  count(job_satisfaction) %&gt;% 
  mutate(freq = n / sum(n)) %&gt;% 
  arrange(match(job_satisfaction, c(&quot;Very High&quot;,&quot;High&quot;,&quot;Medium&quot;,&quot;Low&quot;))) %&gt;% 
  rename(count = n)
distr_balance &lt;- hr_cleaned %&gt;% 
  select(work_life_balance) %&gt;% 
  count(work_life_balance) %&gt;% 
  mutate(freq = n / sum(n)) %&gt;% 
  arrange(match(work_life_balance,c(&quot;Best&quot;,&quot;Better&quot;,&quot;Good&quot;,&quot;Bad&quot;))) %&gt;% 
  rename(count = n)
  
distr_satisf</code></pre>
<pre><code>## # A tibble: 4 x 3
##   job_satisfaction count  freq
##   &lt;chr&gt;            &lt;int&gt; &lt;dbl&gt;
## 1 Very High          459 0.312
## 2 High               442 0.301
## 3 Medium             280 0.190
## 4 Low                289 0.197</code></pre>
<pre class="r"><code>distr_balance</code></pre>
<pre><code>## # A tibble: 4 x 3
##   work_life_balance count   freq
##   &lt;chr&gt;             &lt;int&gt;  &lt;dbl&gt;
## 1 Best                153 0.104 
## 2 Better              893 0.607 
## 3 Good                344 0.234 
## 4 Bad                  80 0.0544</code></pre>
<p>We can see that the job satisfaction and work life balance are not distributed similarly. Both have the majority of employees in the most positive categories, however for work life balance this share is slightly higher at around 70% compared to roughly 60% among job satisfaction. There is also a substantially higher share of employees who are dissatisfied with their job (20%) whereas only around 5% claim to have a bad work life balance. Whereas it is often discussed that work life balance is a main driver of job satisfaction in businesses, this indicates that it is not be the only driver.</p>
</div>
<div id="is-there-any-relationship-between-monthly-income-and-education-monthly-income-and-gender" class="section level2">
<h2>Is there any relationship between monthly income and education? Monthly income and gender?</h2>
<pre class="r"><code>ggplot(hr_cleaned, aes(x = reorder(education, monthly_income, FUN = mean), y = monthly_income)) + # Boxplots are ordered by mean monthly income. This provides additional information about the data as median income and inter-quartile ranges are already graphically demonstrated.
  geom_boxplot() +
    labs(
      title = &quot;Income Distribution by Education Level&quot;,
      x = &quot;Education Level&quot;,
      y = &quot;Monthly Income&quot;
  )</code></pre>
<p><img src="/blogs/blog8_files/figure-html/income_education-1.png" width="648" style="display: block; margin: auto;" /></p>
<pre class="r"><code>ggplot(hr_cleaned, aes(x = reorder(gender, monthly_income, FUN = mean), y = monthly_income)) + 
  geom_boxplot() +
  labs(
    title = &quot;Income Distribution by Gender&quot;,
    x = &quot;Gender&quot;,
    y = &quot;Monthly Income&quot;
  )</code></pre>
<p><img src="/blogs/blog8_files/figure-html/income_education-2.png" width="648" style="display: block; margin: auto;" /></p>
<p>Overall, there seems to be a positive correlation between income and education level. This suggests that the higher the level of education, the higher the monthly income on average. We can also notice that the spread of income levels within the different educational levels increases with increased education. This could be interpreted so that a higher level of education opens up higher salary levels which might have been impossible to achive with a lower level of education, however that it doesnt guarantee these higher levels.</p>
<p>Meanwhile, there also seems to be a relationship between income and gender. Males have a lower mean, median, 25-p &amp; 75-p than females, this difference is however minimal. Interestingly, males do also have a higher number of outliers on the top end of the spectrum.</p>
</div>
<div id="boxplot-of-income-vs-job-role" class="section level2">
<h2>Boxplot of income vs job role</h2>
<pre class="r"><code>ggplot(hr_cleaned, aes(y = reorder(job_role, monthly_income, FUN = mean), x = monthly_income)) + 
  geom_boxplot() +
  labs(
    title = &quot;Income Distribution by Job Role&quot;,
    y = &quot;Role&quot;,
    x = &quot;Monthly Income&quot;
  )</code></pre>
<p><img src="/blogs/blog8_files/figure-html/box_income_role-1.png" width="648" style="display: block; margin: auto;" />
The above highlights which roles are being paid most. They also show that there is a tendency for higher paid roles to have a more spread salary distribution.</p>
</div>
<div id="calculate-and-plot-a-bar-chart-of-the-mean-or-median-income-by-education-level." class="section level2">
<h2>Calculate and plot a bar chart of the mean (or median?) income by education level.</h2>
<pre class="r"><code>hr_cleaned %&gt;%
  group_by(education) %&gt;%
  summarise(mean_income = mean(monthly_income)) %&gt;%
  ggplot(aes(x = reorder(education, mean_income, FUN = mean), y = mean_income)) +
  geom_col() +
  labs(
    title = &quot;Mean Income by Education Level&quot;,
    y = &quot;Mean Income&quot;,
    x = &quot;Education Level&quot;)</code></pre>
<p><img src="/blogs/blog8_files/figure-html/bar_education-1.png" width="648" style="display: block; margin: auto;" /></p>
<p>Due to our previously conducted analysis we have reason to believe that education level has a bigger effect on overall salary range rather than actual salary. Plotting the median income would not show us these outliers that highlight career opportunities at the top end of the spectrum so we decided to plot the mean salary by education. We can see that this increases with educational level as expected.</p>
</div>
<div id="plot-the-distribution-of-income-by-education-level-by-performance-rating" class="section level2">
<h2>Plot the distribution of income by education level by performance rating</h2>
<pre class="r"><code>hr_cleaned %&gt;%
  ggplot(aes(y = reorder(education, monthly_income, FUN = mean), x = monthly_income)) +
  geom_boxplot() +
  facet_wrap(vars(performance_rating)) +
  theme_economist() + 
  scale_fill_economist() +
  labs(
    title = &quot;Income vs Education - Split by performance rating&quot;,
    x = &quot;Monthly Income&quot;,
    y = &quot;Education Level&quot;
  )</code></pre>
<p><img src="/blogs/blog8_files/figure-html/distr_income_education-1.png" width="648" style="display: block; margin: auto;" /></p>
<p>Again we can see our previously discovered tendency for education to allow for a greater range of salaries. In the above boxplots we can again see that a better performance (“Outstanding”) tends to lead to a greater salary spread and slightly higher mean salary for better educated employees. This does not hold perfectly true but there is a general tendency from below college ducation to having a doctor. This indicates that good work especially pays off when you have the right educational level to step up in the company.</p>
</div>
<div id="plot-income-vs-age-faceted-by-job_role" class="section level2">
<h2>Plot income vs age, faceted by <code>job_role</code></h2>
<pre class="r"><code># find job role with the highest mean salary
prof_role &lt;- hr_cleaned %&gt;% 
  group_by(job_role) %&gt;% 
  summarise(mean_income = mean(monthly_income)) %&gt;% 
  arrange(mean_income)
# convert list of best paid job roles into a vector
order_role &lt;- pull(prof_role, job_role)
# set factor of job role to mean monthly income so that upcoming facet wrap is ordered correctly
inc_age_by_role &lt;- hr_cleaned %&gt;% 
  select(monthly_income, age, job_role) %&gt;%
  mutate(job_role = fct_reorder(job_role, monthly_income, .fun = mean)) 
  
ggplot(inc_age_by_role, aes(x = monthly_income, y = age)) +
  geom_point() + 
  facet_wrap(vars(job_role)) +
  theme_economist() +
  labs(
    title = &quot;Income vs Age - Split by role&quot;,
    x = &quot;Monthly Income&quot;,
    y = &quot;Age&quot;
  )</code></pre>
<p><img src="/blogs/blog8_files/figure-html/job_role-1.png" width="648" style="display: block; margin: auto;" /></p>
<p>We can see that the tendency of age relating to monthly income increases with higher earning job roles. In low paying roles such as Sales Representative the age of employee does not seem to be driving the monthly income they receive. On the other end of the spectrum, the Manager roles, we can see that there is a tendency of older employees to earn more.</p>
</div>
